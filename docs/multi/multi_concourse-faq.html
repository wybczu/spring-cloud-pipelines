<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>18.&nbsp;Concourse FAQ</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="multi_spring-cloud-pipelines.html" title="Spring Cloud Pipelines"><link rel="up" href="multi__spring_cloud_pipelines.html" title="Part&nbsp;I.&nbsp;Spring Cloud Pipelines"><link rel="prev" href="multi__ci_server_worker_prerequisites.html" title="17.&nbsp;CI Server Worker Prerequisites"><link rel="next" href="multi_jenkins_faq.html" title="19.&nbsp;Jenkins FAQ"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">18.&nbsp;Concourse FAQ</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="multi__ci_server_worker_prerequisites.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;I.&nbsp;Spring Cloud Pipelines</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="multi_jenkins_faq.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="concourse-faq" href="#concourse-faq"></a>18.&nbsp;Concourse FAQ</h2></div></div></div><p>This section covers the most commonly asked questions about using Concourse with Spring Cloud Pipeline:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Can I use the pipeline for some other repos?</span></dt><dd>Yes To do so, change the <code class="literal">app-url</code> in <code class="literal">credentials.yml</code>!</dd><dt><span class="term">Does this work for ANY project out of the box?</span></dt><dd>Not really. This is an <code class="literal">opinionated pipeline</code>. That is why we took some
opinionated decisions. See the documentation to learn
what those decisions are.</dd><dt><span class="term">Can I modify this to reuse in my project?</span></dt><dd><p class="simpara">Yes It is an open-source project. The important thing is that the core part of the logic is written in
Bash scripts. That way, in the majority of cases, you could change only the bash scripts without changing the
whole pipeline. <a class="link" href="https://github.com/spring-cloud/spring-cloud-pipelines/tree/master/common/src/main/bash" target="_top">You can check out the scripts here.</a></p><p class="simpara">Furthermore, if you want only to customize a particular function under <code class="literal">common/src/main/bash</code>, you can provide your own
function under <code class="literal">common/src/main/bash/&lt;some custom identifier&gt;</code> where <code class="literal">&lt;some custom identifier&gt;</code> is equal to the value of
the <code class="literal">CUSTOM_SCRIPT_IDENTIFIER</code> environment variable. It defaults to <code class="literal">custom</code>.</p></dd><dt><span class="term">I ran out of resources! (PCF Dev)</span></dt><dd><p class="simpara"><a name="resources" href="#resources"></a> When deploying the application to stage or prod, you can get an <code class="literal">Insufficient resources</code> exception. The way to
resolve it is to kill some apps from the test or stage environment. To do so, run the following commands:</p><div class="informalexample"><pre class="programlisting">cf target -o pcfdev-org -s pcfdev-<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">test</span>
cf stop github-webhook
cf stop github-eureka
cf stop stubrunner</pre></div><p class="simpara">You can also run <code class="literal">./tools/cf-helper.sh kill-all-apps</code> to remove
all demo-related apps deployed to PCF Dev.</p></dd><dt><span class="term">The rollback step fails due to a missing JAR.</span></dt><dd><p class="simpara">You must have pushed some tags and must have also removed the Artifactory volume that
contained them. To fix this, remove the tags by running the following command:</p><div class="informalexample"><pre class="programlisting">git tag -l | xargs -n <span class="hl-number">1</span> git push --delete origin</pre></div></dd><dt><span class="term">Can I see the output of a job from the terminal?</span></dt><dd><p class="simpara">Yes. Assuming that pipeline name is <code class="literal">github-webhook</code> and the job name is
<code class="literal">build-and-upload</code> you can see the output by running the following command:</p><div class="informalexample"><pre class="programlisting">fly watch --job github-webhook/build-and-upload -t docker</pre></div></dd><dt><span class="term">I clicked the job and it is constantly pending.</span></dt><dd><p class="simpara">Most likely, you forgot to click the <code class="literal">play</code> button to
unpause the pipeline. Click the top left, expand the list of pipelines, and click
the <code class="literal">play</code> button next to <code class="literal">github-webhook</code>.</p><p class="simpara">Another problem that might occur is that you need to have the <code class="literal">version</code> branch.
Concourse waits for the <code class="literal">version</code> branch to appear in your repository. So, for
the pipeline to start, ensure that when doing some git operations, you have not
forgotten to create and copy the <code class="literal">version</code> branch too.</p></dd><dt><span class="term">The route is already in use (CF)</span></dt><dd><p class="simpara">If you play around with Jenkins and Concourse you might end up with the routes occupied,
as indicated by a message similar to the following:</p><div class="informalexample"><pre class="programlisting">Using route github-webhook-<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">test</span>.local.pcfdev.io
Binding github-webhook-<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">test</span>.local.pcfdev.io to github-webhook...
FAILED
The route github-webhook-<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">test</span>.local.pcfdev.io is already in use.</pre></div><p class="simpara">To fix the problem, you can delete the routes, as follows:</p><div class="informalexample"><pre class="programlisting">yes | cf delete-route local.pcfdev.io -n github-webhook-<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">test</span>
yes | cf delete-route local.pcfdev.io -n github-eureka-<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">test</span>
yes | cf delete-route local.pcfdev.io -n stubrunner-<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">test</span>
yes | cf delete-route local.pcfdev.io -n github-webhook-stage
yes | cf delete-route local.pcfdev.io -n github-eureka-stage
yes | cf delete-route local.pcfdev.io -n github-webhook-prod
yes | cf delete-route local.pcfdev.io -n github-eureka-prod</pre></div><p class="simpara">You can also run the <code class="literal">./tools/cf-helper.sh delete-routes</code> script.</p></dd><dt><span class="term">I mm unauthorized to deploy infrastructure jars</span></dt><dd>Most likely, you forgot to update your local <code class="literal">settings.xml</code> file with Artifactory&#8217;s
setup. See <a class="link" href="">this section of the docs and update your <code class="literal">settings.xml</code> file</a>.</dd><dt><span class="term">The <code class="literal">version</code> resource is broken. When I click on it, I get the following error</span></dt><dd></dd></dl></div><div class="informalexample"><pre class="programlisting">resource script <span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">'/opt/resource/check []'</span> failed: <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">exit</span> status <span class="hl-number">128</span>

stderr:
Identity added: /tmp/git-resource-private-key (/tmp/git-resource-private-key)
Cloning into <span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">'/tmp/git-resource-repo-cache'</span>...
warning: Could not find remote branch version to clone.
fatal: Remote branch version not found in upstream origin</pre></div><p>That means that your repo does not have the <code class="literal">version</code> branch. You need
set it up.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="multi__ci_server_worker_prerequisites.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="multi__spring_cloud_pipelines.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="multi_jenkins_faq.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">17.&nbsp;CI Server Worker Prerequisites&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="multi_spring-cloud-pipelines.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;19.&nbsp;Jenkins FAQ</td></tr></table></div></body></html>